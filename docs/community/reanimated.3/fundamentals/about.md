---
description: Reanimated - это библиотека React Native, позволяющая создавать плавные анимации и взаимодействия, работающая в потоке UI
---

# О React Native Reanimated

!!!info ""

    Это сайт документации по релизу Reanimated 3.x.

!!!warning ""

    Reanimated **3.0.0** поддерживает React Native 0.64+. Последующие релизы нацелены на поддержку [3 последних стабильных версий React Native](https://github.com/reactwg/react-native-releases#which-versions-are-currently-supported).

**Reanimated** - это библиотека React Native, позволяющая создавать плавные анимации и взаимодействия, работающая в потоке UI.

## Мотивация

В приложениях React Native код приложения выполняется вне основного потока приложения. Это один из ключевых элементов архитектуры React Native, который помогает предотвратить падения кадров в тех случаях, когда на JavaScript приходится выполнять большую работу.

К сожалению, такой дизайн не очень хорошо работает, когда речь идет о взаимодействии, управляемом событиями. При взаимодействии с сенсорным экраном пользователь ожидает немедленного появления эффектов на экране.

Если обновления происходят в отдельном потоке, то часто бывает так, что изменения, сделанные в потоке JavaScript, не могут быть отражены в том же кадре.

В React Native по умолчанию все обновления задерживаются как минимум на один кадр, поскольку взаимодействие между потоками UI и JavaScript является асинхронным, и поток UI никогда не ждет, пока поток JavaScript закончит обработку событий.

Вдобавок к этому, поскольку JavaScript играет множество ролей, таких как запуск диффирингов и обновлений react, выполнение бизнес-логики приложения, обработка сетевых запросов и т.д., часто бывает так, что события не могут быть обработаны немедленно, что приводит к еще более значительным задержкам.

Цель Reanimated - предоставить возможность разгрузить логику анимации и обработки событий от потока JavaScript к потоку UI. Это достигается за счет определения Reanimated worklets - крошечных фрагментов JavaScript-кода, которые могут быть перенесены в отдельную JavaScript VM и выполняться синхронно с потоком UI.

Это позволяет мгновенно реагировать на события касания и обновлять пользовательский интерфейс в том же кадре, в котором произошло событие, не заботясь о нагрузке на основной поток JavaScript.

## Обзор Reanimated 3.x

Разработки Reanimated 3 были направлены на повышение стабильности и производительности. В этой версии используется знакомый и любимый вами API Reanimated v2, а также архитектура worklets и shared value.

В ней полностью переписан механизм [Shared Value](shared-values.md) и [Layout Animations](layout_animations.md), а также введены переходы между элементами (Shared Element Transitions), чему мы несказанно рады.

Наряду с многочисленными улучшениями и возможностями в Reanimated 3.x появилась поддержка [New Architecture](../../../rn/new-architecture-app-intro.md). Для этого нам пришлось отказаться от поддержки API Reanimated v1. Если ваше приложение (или библиотека, которую вы используете) использует API Reanimated v1, оно больше не будет работать с Reanimated 3.x.

## Известные проблемы и ограничения

Ниже мы приводим некоторые известные нам проблемы:

-   Объекты, передаваемые в ворклеты из React Native, не имеют корректного прототипа, заданного в JavaScript.
    Как следствие, такие объекты не являются перечислимыми, то есть с ними нельзя использовать конструкции "`for in`", оператор spread (три точки) или функции типа `Object.assign`.
-   В Reanimated нельзя анимировать виртуальные компоненты макета. Например, нельзя анимировать вложенные компоненты `<Text>`, поскольку React Native заменяет

```js
<Text>
    string1
    <Text>string2</Text>
</Text>
```

на

```js
<RCTTextView>
    string1
    <RCTVirtualText>string2</RCTVirtualText>
</RCTTextView>
```

а `RCTVirtualText` является виртуальным компонентом.

## Ссылки

-   [About React Native Reanimated](https://docs.swmansion.com/react-native-reanimated/docs/)
