---
description: Стандартное значение для управления анимацией
---

# Animated.Value

Стандартное значение для управления анимацией. Одно **`Animated.Value`** может управлять несколькими свойствами синхронно, но одновременно может управляться только одним механизмом. Использование нового механизма (например, запуск новой анимации или вызов `setValue`) остановит все предыдущие.

Обычно инициализируется с помощью `new Animated.Value(0);`.

## Методы {: #methods}

### setValue()

```ts
setValue(value: number);
```

Непосредственно установите значение. Это остановит любую анимацию, работающую на значении, и обновит все связанные свойства.

**Параметры:**

| Имя     | Тип   | Требуемый | Описание |
| ------- | ----- | --------- | -------- |
| `value` | число | Да        | Значение |

### setOffset()

```ts
setOffset(offset: number);
```

Устанавливает смещение, которое применяется поверх любого установленного значения, будь то через `setValue`, анимацию или `Animated.event`. Полезно для компенсации таких вещей, как начало жеста панорамирования.

**Параметры:**

| Имя      | Тип   | Требуемый | Описание          |
| -------- | ----- | --------- | ----------------- |
| `offset` | число | Да        | Значение смещения |

### flattenOffset()

```ts
flattenOffset();
```

Объединяет значение смещения с базовым значением и сбрасывает смещение на ноль. Окончательный вывод значения не изменяется.

### extractOffset()

```ts
extractOffset();
```

Устанавливает значение смещения на базовое значение и сбрасывает базовое значение на ноль. Окончательный вывод значения не изменяется.

### addListener()

```ts
addListener(callback: (state: {value: number}) => void): string;
```

Добавляет асинхронный слушатель к значению, чтобы вы могли наблюдать за обновлениями анимации. Это полезно, если нет возможности синхронно прочитать значение, так как оно может быть управляемым нативно.

Возвращает строку, которая служит идентификатором для слушателя.

**Параметры:**

| Имя        | Тип      | Требуется | Описание                                                                                            |
| ---------- | -------- | --------- | --------------------------------------------------------------------------------------------------- |
| `callback` | function | Да        | Функция обратного вызова, которая получит объект с ключом `value`, установленным на новое значение. |

### removeListener()

```ts
removeListener(id: string);
```

Снять с регистрации слушателя. Параметр `id` должен соответствовать идентификатору, ранее возвращенному функцией `addListener()`.

**Параметры:**

| Имя  | Тип    | Требуется | Описание                     |
| ---- | ------ | --------- | ---------------------------- |
| `id` | string | Yes       | Id для удаляемого слушателя. |

### removeAllListeners()

```ts
removeAllListeners();
```

Удалите всех зарегистрированных слушателей.

### stopAnimation()

```ts
stopAnimation(callback?: (value: number) => void);
```

Останавливает любую запущенную анимацию или отслеживание. `callback` вызывается с конечным значением после остановки анимации, что полезно для обновления состояния для соответствия позиции анимации с расположением.

**Параметры:**

| Имя        | Тип      | Требуемый | Описание                                           |
| ---------- | -------- | --------- | -------------------------------------------------- |
| `callback` | function | Нет       | Функция, которая будет получать конечное значение. |

### resetAnimation()

```ts
resetAnimation(callback?: (value: number) => void);
```

Останавливает любую анимацию и возвращает значение к исходному.

**Параметры:**

| Имя        | Тип      | Требуемый | Описание                                           |
| ---------- | -------- | --------- | -------------------------------------------------- |
| `callback` | function | Нет       | Функция, которая будет получать исходное значение. |

### interpolate()

```ts
interpolate(config: InterpolationConfigType);
```

Интерполирует значение перед обновлением свойства, например, отображает 0-1 на 0-10.

См. `AnimatedInterpolation.js`.

**Параметры:**

| Имя      | Тип    | Требуемый | Описание  |
| -------- | ------ | --------- | --------- |
| `config` | object | Да        | См. ниже. |

Объект `config` состоит из следующих ключей:

-   `inputRange`: массив чисел
-   `outputRange`: массив чисел или строк
-   `easing` (необязательно): функция, которая возвращает число, учитывая входное число
-   `extrapolate` (необязательно): строка, такая как 'extend', 'identity' или 'clamp'
-   `extrapolateLeft` (необязательно): строка, такая как 'extend', 'identity' или 'clamp'
-   `extrapolateRight` (необязательно): строка, такая как 'extend', 'identity', или 'clamp'

### animate()

```ts
animate(animation, callback);
```

Обычно используется только внутри компании, но может быть использован пользовательским классом анимации.

**Параметры:**

| Имя         | Тип       | Требуемый | Описание                  |
| ----------- | --------- | --------- | ------------------------- |
| `animation` | Animation | Да        | Смотрите `Animation.js`.  |
| `callback`  | function  | Да        | Функция обратного вызова. |

## Ссылки

-   [https://reactnative.dev/docs/animatedvalue](https://reactnative.dev/docs/animatedvalue)
