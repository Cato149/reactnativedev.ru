# Animated.ValueXY

2D-значение для управления 2D-анимацией, например, жестами панорамирования. Почти идентичный API обычному [`Animated.Value`](animatedvalue.md), но мультиплексированный. Содержит под капотом два обычных `Animated.Value`.

## Пример

<div data-snack-id="@bndby/animated.valuexy" data-snack-platform="web" data-snack-preview="true" data-snack-theme="light" style="overflow:hidden;background:#F9F9F9;border:1px solid var(--color-border);border-radius:4px;height:505px;width:100%"></div>

## Методы

### `setValue()`

```tsx
setValue(value: {x: number; y: number});
```

Непосредственно установите значение. Это остановит любую анимацию, работающую на значении, и обновит все связанные свойства.

**Параметры:**

| Имя   | Тип                  | Требуемый | Описание |
| ----- | -------------------- | --------- | -------- |
| value | {x: число; y: число} | Да        | Значение |

### `setOffset()`

```tsx
setOffset(offset: {x: number; y: number});
```

Устанавливает смещение, которое применяется поверх любого установленного значения, будь то через `setValue`, анимацию или `Animated.event`. Полезно для компенсации таких вещей, как начало жеста панорамирования.

**Параметры:**

| Имя      | Тип                  | Требуемый | Описание          |
| -------- | -------------------- | --------- | ----------------- |
| смещение | {x: число; y: число} | Да        | Значение смещения |

### `flattenOffset()`

```tsx
flattenOffset();
```

Объединяет значение смещения с базовым значением и сбрасывает смещение на ноль. Окончательный вывод значения не изменяется.

### `extractOffset()`

```tsx
extractOffset();
```

Устанавливает значение смещения на базовое значение и сбрасывает базовое значение на ноль. Окончательный вывод значения не изменяется.

### `addListener()`

```tsx
addListener(callback: (value: {x: number; y: number}) => void);
```

Добавляет асинхронный слушатель к значению, чтобы вы могли наблюдать за обновлениями анимации. Это полезно, если нет возможности синхронно прочитать значение, так как оно может быть управляемым нативно.

Возвращает строку, которая служит идентификатором для слушателя.

**Параметры:**

| Имя      | Тип      | Требуется | Описание                                                                                            |
| -------- | -------- | --------- | --------------------------------------------------------------------------------------------------- |
| callback | function | Yes       | Функция обратного вызова, которая получит объект с ключом `value`, установленным на новое значение. |

### `removeListener()`

```tsx
removeListener(id: string);
```

Снять с регистрации слушателя. Параметр `id` должен соответствовать идентификатору, ранее возвращенному функцией `addListener()`.

**Параметры:**

| Имя | Тип    | Требуется | Описание                     |
| --- | ------ | --------- | ---------------------------- |
| id  | string | Yes       | Id для удаляемого слушателя. |

### `removeAllListeners()`

```tsx
removeAllListeners();
```

Удалите всех зарегистрированных слушателей.

### `stopAnimation()`

```tsx
stopAnimation(callback?: (value: {x: number; y: number}) => void);
```

Останавливает любую запущенную анимацию или отслеживание. `callback` вызывается с конечным значением после остановки анимации, что полезно для обновления состояния для соответствия позиции анимации с расположением.

**Параметры:**

| Имя      | Тип      | Требуемый | Описание                                           |
| -------- | -------- | --------- | -------------------------------------------------- |
| callback | function | No        | Функция, которая будет получать конечное значение. |

### `resetAnimation()`

```tsx
resetAnimation(callback?: (value: {x: number; y: number}) => void);
```

Останавливает любую анимацию и возвращает значение к исходному.

**Параметры:**

| Имя      | Тип      | Требуемый | Описание                                           |
| -------- | -------- | --------- | -------------------------------------------------- |
| callback | function | No        | Функция, которая будет получать исходное значение. |

### `getLayout()`

```tsx
getLayout(): {left: Animated.Value, top: Animated.Value};
```

Преобразует `{x, y}` в `{left, top}` для использования в стиле, например.

```tsx
style={this.state.anim.getLayout()}
```

### `getTranslateTransform()`

```tsx
getTranslateTransform(): [
  {translateX: Animated.Value},
  {translateY: Animated.Value},
];
```

Преобразует `{x, y}` в пригодное для использования преобразование перевода, например

```tsx
style={{
  transform: this.state.anim.getTranslateTransform()
}}
```
